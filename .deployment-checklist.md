# üöÄ Deployment Checklist

## Pre-Deployment Steps

### ‚úÖ Code Quality
- [x] No errors in the codebase
- [x] Console logs are kept for production monitoring
- [x] Environment variables properly configured
- [x] .gitignore files in place

### ‚úÖ Environment Variables

#### Backend (.env)
```
MONGODB_URI=<your-mongodb-atlas-uri>
NODE_ENV=production
PORT=5000
```

#### Frontend (.env)
```
VITE_API_URL=<your-backend-url>/api
```

### ‚úÖ Database Setup
- [ ] MongoDB Atlas cluster created
- [ ] Database user created with appropriate permissions
- [ ] Network access configured (0.0.0.0/0 for cloud deployments)
- [ ] Connection string obtained
- [ ] Database seeded with food items: `npm run seed`

## Deployment Steps

### Option 1: Vercel (Frontend) + Render (Backend) - RECOMMENDED

#### Step 1: Deploy Backend to Render

1. Go to [render.com](https://render.com) and sign in
2. Click "New +" ‚Üí "Web Service"
3. Connect your GitHub repository
4. Configure:
   - **Name**: weight-tracker-api
   - **Environment**: Node
   - **Build Command**: `cd backend && npm install`
   - **Start Command**: `cd backend && npm start`
   - **Root Directory**: Leave empty (or set to `backend` if supported)
5. Add Environment Variables:
   ```
   MONGODB_URI=<your-mongodb-atlas-connection-string>
   NODE_ENV=production
   PORT=5000
   ```
6. Click "Create Web Service"
7. Wait for deployment (5-10 minutes for first deploy)
8. **Copy your backend URL** (e.g., `https://weight-tracker-api.onrender.com`)

#### Step 2: Deploy Frontend to Vercel

1. Go to [vercel.com](https://vercel.com) and sign in
2. Click "Add New" ‚Üí "Project"
3. Import your GitHub repository
4. Configure:
   - **Framework Preset**: Vite
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `dist`
5. Add Environment Variable:
   ```
   VITE_API_URL=<your-backend-url-from-render>/api
   ```
   Example: `https://weight-tracker-api.onrender.com/api`
6. Click "Deploy"
7. Wait for deployment (2-5 minutes)
8. Your app is live! üéâ

### Option 2: Railway (Full Stack)

1. Go to [railway.app](https://railway.app) and sign in
2. Click "New Project" ‚Üí "Deploy from GitHub repo"
3. Select your repository
4. Deploy Backend:
   - Add service for backend
   - Set root directory to `backend`
   - Add environment variables: `MONGODB_URI`, `NODE_ENV`
   - Copy the backend URL
5. Deploy Frontend:
   - Add service for frontend
   - Set root directory to `frontend`
   - Add environment variable: `VITE_API_URL=<backend-url>/api`

## Post-Deployment

### Testing
- [ ] Visit your deployed frontend URL
- [ ] Test login functionality
- [ ] Test food logging (breakfast, lunch, dinner)
- [ ] Test weight entry
- [ ] Test progress charts
- [ ] Test meal summary feature
- [ ] Test on mobile device
- [ ] Test in different browsers

### Monitoring
- [ ] Check backend logs for errors
- [ ] Verify MongoDB connection is stable
- [ ] Test API health endpoint: `<backend-url>/api/health`

### Updates to CORS
If you deployed to different URLs, update CORS in `backend/server.js`:
```javascript
app.use(cors({
  origin: [
    'http://localhost:5173',
    'https://your-vercel-app.vercel.app',  // Add your actual URL
  ],
  credentials: true
}));
```

## üîß Troubleshooting

### Backend Issues
- Check Render logs for errors
- Verify MONGODB_URI is correct
- Ensure database network access allows connections from anywhere (0.0.0.0/0)
- Check that PORT is set to 5000 or matches your configuration

### Frontend Issues
- Verify VITE_API_URL points to correct backend
- Check browser console for CORS errors
- Ensure environment variables are set in Vercel dashboard
- Rebuild deployment if you change environment variables

### Database Issues
- Verify MongoDB Atlas cluster is running
- Check database user has read/write permissions
- Run seed command: `cd backend && npm run seed`
- Check connection string format

## üìù Notes

- First deploy on Render may take 5-10 minutes
- Render free tier: Services sleep after 15 minutes of inactivity
- Cold starts may take 30-60 seconds on free tier
- Vercel redeploys automatically on git push
- Remember to update CORS origins after deployment
